анализ тональность комментарий в социальный сетях: создание карта эмоция житель санкт-петербург а.в. чижик1, с.а. мельникова2, в.п. захаров1 введение один из важный аспект социологический анализ современный тенденция развитие общество являться изучение социальный настроение населения, который являться в некоторый смысл доминанта функционировать сознания. это – один из интегральный показатель восприятие население социальный и экономико-политический процессов, который выступать индикатор определение уровень благополучия, социальный устроенность общества. на основание исследование социальный настроение можно проследить энергетический потенциал общества, которые, отталкиваться от быстроизменяющийся ситуация в страна и мире, способный перерастать в процессы, формировать политический строй и такой институт как гражданский общество. необходимо различать два понятия, использовать в социологии, психология и философии: индивидуальный настроение и групповое, который часто связать друг с друг за счёт цепной реакции, свойственный в поведение любой социума. большой рывок в изучение механизм формирование индивидуальный настроение сделать советский психолог и философ д.н. узнадзе, который говорить о том, что на восприятие тот или иной ситуация сказываться динамический стереотип восприятия, являться психофизический основа настроение индивид [1]. такой образом, в настроение как целостный форма жизнеощущение человек находить свой выражение социальный процессы. в данный случай уже можно говорить о том, что индивидуальный настроение влиять на атмосфера в обществе, однако надо понимать, что оно хотя и относительно устойчивый явление, но слабо выраженный или быстро угасающее. значит, для оценка ситуация в страна следовать обращаться к анализ социальный настроения, который формироваться на основа индивидуального. иметь смысл разделять следующий вид социальный настроения: «групповой настроение», «политический настроение», «массовый настроение» (в.а. ядов) [2]. надо отметить, что каждый из вид социальный настроение иметь свой отражение на социально-психологический климат общество и мочь проявляться как в глобальный ключ (митинги, восстание и пр.), так и в локальном. б.ф. поршнев, философ и социолог, который ввести сам понятие «социальный настроение» в русский науку, делать следующий вывод: «социальный настроение – это эмоциональный состояния, связанный с осуществление или неосуществленностью, с разный форма осуществление тот или иной надежда и чаяний, помысел и замыслов. как правило, социальный настроение – это эмоциональный отношение к тому, что стоить на пути, кто мешает, или, напротив, кто помогать воплощение желаемый в жизнь» [3]. то есть поршнев подчёркивать присутствие субъект и объект настроения, что для социологический интерпретация очень важно. благодаря доступность интернет и простота выражение мысль в формировать на он базис виртуальный пространстве, интеграция социальный сеть в повседневный практика весь возрастной группа и, соответственно, возможность быстрый коллективный взаимодействие индивид человек проводить в это контекст больший часть свой время [4, 5, 6]. актуализировать социальный сеть смещение временной и пространственный ограничение приводить к быстрый распространение реакция общество на городской повестка дня, это означает, что внутри публичный обсуждение появляться большой массив текстовый данных, который содержать эмоционально окрасить комментарий пользователей, с зафиксировать тематический отсылка [7]. поэтому социальный медиа стать источник большой количество открытый данных, который содержать неструктурированный (но поддаваться анализ метод nlp и машинный обучения) информация о поведение аудитория на фон возникать публичный обсуждение информационный повестка день и событий, окружающий они в локация проживания. так мы мочь получить ценный информация о динамика функционирование социальный группы, такой как эмоция индивидов, сливаться в социальный настроение, и изменение в общество (как глобальный структуры), который базируются, как правило, именно на эмоциональный состояние социальный группы. цель данный исследование быть разработка методика сбора, предобработка дать и последующий анализ тональность комментарий пользователей. такой образом, эмпирический часть исследование быть направить на изучение механизм распространение эмоция через анализ активность взаимодействие и коммуникативный особенность отношение индивид в социальный сетях. в качество практический результат быть создать веб-сервис, представлять из себя бета-версия интерактивный карта район санкт-петербурга, разметить по уровень эмоциональный напряжённость с учёт получить при анализ датасет информации. 1. дать мы быть провести исследование общественный активность житель район санкт-петербург в коммуникативный пространство социальный сеть вконтакте. в выборка попасть 36 публичный группа (по 2 крупный группа на один район). для анализ поведенческий особенность пользователь быть построить тепловой карта активность постинг по день недели, а также графика соотношение количество лайковый и репост (рис. 1). рис. 1. слева: тепловой карта постов, сообщество город кудрово, динамика постинг 2013-2021; справа: активность невербальный реакция индивид на пост, соотношение лайковый и репост провести первичный исследование слабо структурировать текстовый дать (lda) показать основной состав тем, обсуждать в группах, соотноситься с район города. наиболее активный обсуждение строиться вокруг три основный тем: проблема района, вопрос здравоохранения, семья. в качество промежуточный результат быть разработать методология сбор текстовый данных, релевантный дальнейший цель разметка собранный корпус для нанесение информация о эмоциональный состояние на карту. быть принять решение первичный оценивать нулевой пост на предмет наличие ощутимый реакция с сторона пользователей, если она есть, то мы выкачивать комментарий (сохранять служебный информация с цель при необходимость иметь возможность вручную проанализировать ретроспектива беседы). это быть сделать для того, чтобы оставить за предел проводить анализ пост бытовой характер (например, сообщение про утерять ключи, время работа районный администрация и т.п.). далее мы ввести временной ограничение и выкачать цепочка диалог только за 12 близкий к исследование месяца. так как быть до конец неясно, какой алгоритм анализ тональность мы подойти (из-за специфика дискурс социальный сеть – короткий сообщения, часто присутствие ненормативный лексика без выраженный отсылка к негатив и т.п.). к тот же необходимо быть получить минимальный тестовый результат, чтобы определиться, какой именно концепт разметка тональность комментарий мы устроить для создание веб-сервис с карта социальный настроение жителей. логика постинг комментарий в вконтакте изобразить на рис.2. из схема видно, что у n-го комментарий мочь быть также комментарий (и логически они связать с ним). встать вопрос, какой образ формировать итоговый датасет с необходимый мы данными. быть принять решение оценивать на это этап анализ тональность весь группа комментариев. то есть в алгоритм мы считать нужный отправить комментарий #n в совокупность с весь реакция на него. соответственно в итог мы не оценивать реакция социальный группа на n-го комментирующего, а ограничиваться анализ общий эмоциональный фона: иной словами, гипотеза заключаться в том, что вероятно через такой оценка тональность комментарий можно оценить уровень потенциальный агрессивность района. на рис. 3 представить внешний вид собранный набор данных. рис. 2. структура взаимодействие поста, комментарий и комментарий к комментарий рис. 3. внешний вид датасет с комментарий пользователь стоить также отметить, что по каждый район датасет собираться отдельно (в соответствие с дальнейший цель нанести результат на карту). 2. анализ тональность комментарий анализ тональность текст являться один из востребовать nlp-задач. однако, несмотря на она частотный появление в исследованиях, она иметь достаточно много преломлений: например, алгоритм мочь «захватывать» и оценивать эмоциональный окраска текст пользователя, а мочь «склоняться» к определению, быть ли комментарий положительный по отношение к первоначальный контексту. кроме того, тональность, содержаться в тексте, можно анализировать на уровень бинарный классификация (основа – выделение полярный пар, к примеру, «негативный-позитивный»), или детализировать на несколько класс (самай распространить стратегия выделить три класс – «негативный», «нейтральный» и «позитивный», также часто использовать пятибалльный шкала – очень положительный, положительный, нейтральный, отрицательный и крайне отрицательный текст). мы остановиться на гипотезе, что бинарный классификация быть достаточно на данный этап анализ эмоциональный состояние житель района. в наш исследование быть использовать язык программирование python и он библиотека для работа с текстом. ниже привести схема, демонстрировать всё возможный подход к оценка тональность и библиотека python, который можно применить для этот цель (рис. 4). рис. 4. подход к оценка тональность и соответствовать они python-библиотека стоить коротко отметить, что существовать ряд методов, который основать на применение правило для детекции тональность текста, это подразумевать наличие заранее составить тональный словарей. в целое процесс являться трудоёмкий и на данный момент практически не используется. что касаться метод машинный обучения, то они основать на анализ признаков. модель машинный обучение сопоставлять набор входной дать (признаков) с предиктор (целевой переменной). цель это процесс состоять в том, чтобы модель изучить шаблон или сопоставление между этот входной дать и целевой переменной, чтобы затем модель мочь предсказать целевой переменный на новый данных. классический метод машинный обучение использовать алгоритм классификация с однослойной нейронный сетью, глубокий обучение требовать наличие несколько слой в нейронный сеть (переть это первый скрытый слой – это встраивать слой (embedding layer), который содержать контекстный информацию). при этом, чем хороший метод улавливать нюанс контекста, тем выше точность классификация настроений. существовать несколько метод кодирование текст с цель более точный фиксация контекста. в свой эксперимент мы остановиться на классический подход к обучению, так как он преимущество заключаться в автоматический извлечение функция из необработанный дать с небольшой предварительный обработка или без нее, а также такой метод требовать маленький ресурс памяти. далее текстовый дать быть поэтапно предобработать по следующий схеме: 1) разбиение текст реплика на токены; 2) удаление спецсимволов, ссылка и знак пунктуации; 3) удаление стоп-слов; 4) нормализация токенов. для взаимодействие с текст быть выбрать библиотека spacy, который на данный момент являться один из самый популярный решение при обработка текста, в частности, она помогать размечать часть речь и выделять именовать сущности. ниже привести рисунок, иллюстрировать логика обработка дать в spacy (рис.5). рис. 5. логика обработка дать spacy doc являться центральный структура дать в spacy, именно в он храниться последовательность токенов. отметим, что для русский язык существовать официальный модель от spacy, поддерживать всё основной операции. spacy автоматически присваивать выделить токен 300-мерный вектор на основа вложение слово glove. поэтому задача генерация матрица вложение для предложение видеться довольно простой. однако такой интуитивный подход не работать для небольшой набор данных. проблема заключаться в том, что по мера увеличение длина предложение количество признак (т.е. размер матрицы) резко возрастает. средний длина предложение в собранный набор дать – 13 слов. выходит, что создать матрица быть иметь размер (13, 300), с 3900 элементами. поэтому мы наслать средний значение матрица для каждый элемента, и в итог получить 300-мерный «средний» вектор для каждый предложения. метрика качество для обучать модель быть выбрать auc roc, который можно интерпретировать как вероятность того, что элемент с положительный классификация на сам дело являться положительным, и насколько вероятно, что элемент с отрицательный классификация являться отрицательный (ин словами, показатель равный доля пара объект вид «объект класс 1, объект класс 0», который алгоритм верно упорядочил). такой оценка более правильный в дать задаче, так как учитывать несбалансированность в набор данных. это важно, так как видеться логичным, что большинство комментарий быть «притягиваться» к один из класс в сила специфика выбрать дискурса. 3. результат эксперимент мы протестировать работа три алгоритмов: логистический регрессия, случайный лес и метод опорный векторов. ниже представить статистика успешность (рис. 6). рис. 6. сравнение качество работа алгоритм из график видно, что svc являться лучшим, но определение новый пространство признак влечь за себя значительный вычислительный затраты, а обучение занимать в 35 раз большой времени, чем логистический регрессия (длить относительно небольшой улучшение 0,01 auc roc). второй по успешность алгоритм – логистический регрессия. стоить также отметить, что точный настройка этот модель быть довольно простой, так как у она есть только один параметр, который действительно можно изменить (обратный значение сила регуляризации). этот параметр контролирует, насколько мочь варьироваться коэффициенты. это предотвращать переоснащение данных. логистический регрессия дать следующий кривая обучение (рис. 7): рис. 7. анализ успешность работа логистический регрессия графика показывать успех модель в обучать набор и набор перекрёстный проверка (набор перекрёстный проверка быть сделать с 20% данных) при увеличение обучать набор с 100 образец до весь доступный обучать дать (80%). успех это алгоритм подкрепляться тем, что использование средний значение вектор слово в предложение являться эффективный способ уловить настроение в предложении, поскольку оно линейно отображает, быть ли предложение положительным. заключение в ход исследование мы быть сравнять алгоритмы, использовать для оценка тональность текста. в дальнейший для исследование быть использоваться логистический регрессия, так как она показать оптимальный результат. за предел данный эксперимент остаться анализ метод глубокий обучения, но для решение текущий задача такой модель видеться избыточными. в итог мы получить разметить датасет с два новый признаками: класс тональность (негативный/позитивный) и процент вероятность отношение к этот класс (использоваться для дальнейший картирования). реализация получиться веб-сервис в бетта-режим доступный по адрес https://frantsuzova.github.io/spb_map/. далее мы планировать выбрать более сложный формула определение эмоциональный составлять онлайн-дискурс житель район и разработать методика комплексный оценка социальный настроение горожан.