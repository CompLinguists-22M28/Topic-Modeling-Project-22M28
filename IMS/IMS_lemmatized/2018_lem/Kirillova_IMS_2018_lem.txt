оценка эффективность гибридный морфологический анализатор nltk4russian в работа с текст социальный сеть и художественный произведение а.о. кириллова, а.г. мельник, а.д. плетнева, е.в. еникеева, о.а. митрофанов санкт-петербургский государственный университет alyonkakirillova@gmail.com, i-ve-got-a-mail@inbox.ru, adpletneva@perm.ru, protoev@yandex.ru, oa-mitrofanova@yandex.ru 1. введение морфологический аннотация и разрешение морфологический неоднозначность при автоматический разметка текст – задачи, который иметь множество решений, отличаться трудозатрата и стандарт качества. среди систем, обеспечивать достаточно точный морфологический анализ текст на русский языке, стоить выделить система aot (http://www.aot.ru), анализатор mystem (https://tech.yandex.ru/mystem/) и парсер treetagger (http://www.cis.uni-muenchen.de/~schmid/tools/treetagger). существовать распространить мнение, что неоднозначность на один языковой уровень должный сниматься за счёт следующий уровень (в частности, неоднозначность в морфология должный решаться с использование дать о структура синтаксический группа и синтаксический связь между слово в предложении) [1]. такой метод мочь быть эффективным, но при это он являться дорогостоящий и требовать больший усилий. в настоящий время развиваться специализировать модуль для снятие омонимии, представлять три основной группы: — системы, основать на правило (создать вручную); — системы, основать на вероятностный модель и обученный на разметить корпусах; — гибридный системы, использовать как подход на правилах, так и вероятностный модели. системы, основать на правилах, как раз похожий по свой реализация на предлагать подход к снятие омонимия с помощь следующий языковой уровня. такой система работать линейно. система второй типа, т.е. основать на сборник научный стать международный объединить конференция «интернет и современный общество», ims. вероятностный моделях, работать медленнее, но они простой реализовать. немаловажный роль здесь играть размер обучать корпуса. некоторый система должный обучаться на корпус небольшой размеров, так как больший корпус мочь повредить работа алгоритма. ежегодно в россия проводиться международный научный конференция по компьютерный лингвистика «диалог» (http://www.dialog-21.ru/). цель конференция – обмен идея между специалист в область лингвистики, а также представление накопить знание и результат разработать система для автоматический обработка текста. в рамка конференция проводиться соревнование «dialogue evaluation» (http://www.dialog-21.ru/evaluation/), который включать в себя тестирование по различный темам, таким, как анализ тональности, анализ семантический сходства, машинный перевод и др. в 2017 г. один из такой тем быть морфологический анализ (http://www.dialog-21.ru/evaluation/2017/morphology/). соревнование морфологический анализатор проводиться в два форматах: на закрытый дорожка оцениваться алгоритмы, обученный на ограниченный количество заранее предоставить данных, а на открытый дорожка участник мочь обучать анализатор на любой материале. на оба дорожка оцениваться качество частеречной разметки, полный разметка (т.е. определение часть речь и значение основный лексико-грамматический категорий) и лемматизации. для обучение алгоритм на закрытый дорожка участник быть предоставить разметить корпус с снятой вручную омонимией, а именно подкорпус национальный корпус русский язык (нкря, http://www.ruscorpora.ru/), подкорпус генеральный интернеткорпус русский язык (гикря, http://www.webcorpora.ru/), дать проект opencorpora (http://opencorpora.org/) и материал корпус синтагрус (http://www.ruscorpora.ru/ instruction-syntax.html) [2]. цель данный исследование являться тестирование гибридный морфоанализатор nltk4russian на разный тип текстов. ранее быть провести оценка качество работа морфоанализатор с привлечение тестовый выборка из нкрить и opencorpora [3]. на данный этап представляться необходимый обновить этот результат и протестировать морфоанализатор на корпусный дать второй соревнование по морфологический анализ в рамка «dialogue evaluation». этот тестовый материал включать художественный и новостной тексты, а также текстовый материал из социальный сеть вконтакте. экспериментальный дизайн данный исследование включать в себя следующий этапы: — исследование основный режим работа морфоанализатор nltk4russian; — создание конвертера, преобразовать теги, использовать для морфологический разметка в universal dependencies, в тег формат pymorphy2; — обучение морфоанализатор и он тестирование на выбрать данных; — обработка результат и оценка качество общий морфологический и отдельно частеречной разметка с помощь метрика «точность средство измерений» (accuracy); — сравнение получить дать для использовать корпусов. 2. морфоаналогический анализатор nltk4russian 2.1. принцип работа морфоанализатор анализатор nltk4russian – лингвистический комплекс для исследование русскоязычный корпус текстов, разрабатываться на кафедра математический лингвистика спбгу (https://github.com/named-entity/nltk4russian) [3, 4, 5]. главный задача – улучшение морфологический анализ с использование уже существующий инструментов. nltk4russian называться гибридный морфоанализатором, так как объединять в себя алгоритм nltk (http:// www.nltk.org/) [6] и pymorphy2 (http://pymorphy2.readthedocs.org/en/latest/) [7]. nltk – natural language toolkit – библиотека python, который предназначить для работа с текст на весь уровень языка. средство библиотека позволять проводить как базовый операция (лемматизация, токенизация, стемминг), так и многоуровневый анализ с применение алгоритм машинный обучения. nltk также позволять проводить морфологический анализ и разметку. в число инструмент теггеры, использовать словарный данные, теггера на основа скрытый марковский моделей, анализатор с применение контекстный информация и др. [6]. важный особенность nltk заключаться в том, что в большинство случай использоваться разметить корпус, что делать лингвистический комплекс независимый от язык текст для анализа. одновременно с это среда nltk не адаптировать для конкретный языков, она использовать универсальный метаинформацию. nltk4russian, такой образом, являться адаптация nltk к русскоязычный текстам, создавать путём интеграция лингвонезависить алгоритм nltk и морфологический анализатор для русский языка. pymorphy2 – анализатор русский текстов, который использовать морфологический словарь opencorpora. для этот система не нужный обучать корпус, всё необходимый словоформа описать в словаре. для редкий или несуществующий форма работать предсказатель, который выводить предполагать тег по префикс и по конец слова. для совпадать словоформа или форма с неоднозначность выводиться всё возможный интерпретации, вероятность тот или иной вариант рассчитываться не на основа контекста, но по дать словаря. можно сказать, что nltk4russian предлагать альтернативный решение неоднозначности: если pymorphy2 выводить несколько вариант разбора, то теггера пользоваться возможность анализ соседний словоформа от nltk. такой образом, nltk4russian объединять достоинство nltk и pymorphy2: текст анализироваться с помощь анализатор pymorphy2, для дизамбигуация вызываться теггера nltk. при это система мочь работать как в гибридный режиме, так и с использование nltk и pymorphy2 по отдельности. 2.2. режим работа морфоанализатор nltk4russian работать в 3 режимах, для переключение каждый из они при вызов морфоанализатор необходимо указать специальный параметр-название "-n": — гибридный (pymorphy2 + nltk); — pymorphy2 (pymorphytagger); — униграммный, биграммный и триграммный теггера nltk. гибридный режим – это режим с использование pymorphy2 и биграммный теггера nltk nltk.tag.sequentials. при вызов анализатор указываться файл с текстом, разметить корпус для обучение и название файла, который быть создать в ход работы. файл с неразмеченный текст читаться построчно. вызываться функция morphanalyzer() от pymorphy2, при обнаружение неоднозначность запускаться биграммный теггера ngramtagger c соответствовать параметром. режим получить название "pymorphycontext", при запуск анализатор нужно указать параметр "-n" "pmcontext". в режим pymorphy2 вызываться функция morphanalyzer() от pymorphy2, и, как в гибридный режиме, выполняться разметка на основа словарный данных. но и в отличие от pymorphycontext, неоднозначность сниматься с помощь оценка вероятности. параметр рассчитываться на основа дать корпус opencorpora: для весь слово с снятой неоднозначность вычисляется, сколько раз словоформа быть отметить дать тегом. на основа этот частота и выводиться условный вероятность тег (параметр «score»). (http://pymorphy2.readthedocs.io/en/latest/user/guide.html) последний режим анализировать текст на основание контекст – предшествовать словоформа тег слов. униграммный теггера (unigramtagger) искать подходящий вариант разбор в обучать корпусе, биграммный (bigramtagger) анализировать тег предыдущий слово в текст и искать соответствие в обучать корпусе, триграммный (trigramtagger) составлять контекст из разбор слово и два предыдущий слово и искать подходящий разбор в обучать корпусе. для вызов морфоанализтор в один из этот режим при запуск нужно указать соответственно "-n 1gram", "2gram" или "3gram". 3. тестирование морфоанализатор nltk4russian 3.1. исходный дать в качество обучать дать быть взять материал нкрить и проект opencorpora, в качество тестовый – тексты, который также являться тестовый для участник соревнование «dialogue evaluation» 2017 г., а именно корпус текст новостной сайт lenta, социальный сеть вконтакте и текст роман о. зайончковский «петрович» (далее – jz). стоить отметить, что данный материал представлять себя текст с различный жанровый и стилистический особенностями. обучение морфоанализатор nltk4russian выполнить на разметить текст с снятой омонимией. обучать материал включать выборка из нкря, а также подкорпус opencorpora объём 30 тыс. словоупотреблений. 3.2. предподготовка обучать и тестовый выборка на предварительный этап тестирование быть сформулировать задача конвертация разметка в формат universal dependencies в формат pymorphy2, использовать в opencorpora. за основа для будущее конвертер быть взять иметься скрипт для конвертация из pymorphy в universal dependencies. отметим, что при конвертация тег в другой формат часто возникать несоответствия. в наш случай больший часть такой несоответствие связать с тем, что в разметка opencorpora предлагаться выделять 12 падеж (шбыть стандартных, звательный, два дополнительный родительных, дополнительный винительный и два дополнительный предложных). стандарт universal dependencies содержать только шесть тег для падежей, поэтому при конвертация часть тег в формат pymorphy2 не восстанавливается. для файл с тестовый выборка потребоваться дополнительный обработка, связать с извлечение слово для разметки. этот задача быть реализовать при помощь специальный скрипта. на вход поступать файл с тестовый выборка (lenta, vk или jz), в который из каждый строка извлекаться иметься словоформы. на выход мы получать отдельный файл с извлечь формами, с который далее работать морфоанализатор. обучать выборка (материал нкрить и opencorpora) уже содержать разметку, однако этот разметка представить в формат universal dependencies. поскольку на выход мы должный получить разметить тестовый материал с тег pymorphy, то и обучать выборка должный содержать тег нужный мы формата. поэтому обучать выборка также потребовать предварительный обработки. с этот цель быть разработать дополнительный скрипт, который обрабатывать файл с обучать выборкой, последовательно заменять в они тег universal dependencies на тег pymorphy2. такой образом, на предварительный этап мы подготовить обучать и тестовый корпус к тестирование морфоанализатора. 3.3. тестирование морфоанализатор и результат обучение и разметка тестовый выборка осуществляться в соответствие с стандартный процедурой, описать для компонент train-tagger гибридный морфоанализатора. морфоанализатор мочь размечать тестовый корпус два способами: приписывать только частеречной тег или полный грамматический характеристика дать словоформы. для полный разметка указываться параметр -full . соответственно, оценка результат разметка выполняться по это два основание при помощь отдельный скрипт eval в состав морфоанализатора. вывод такой образом, при оценка результат быть выяснено, что получить дать практически не зависеть от выбрать обучать корпус (например, результат частеречной разметка корпус текст автор jz с нкрить и с корпус opencorpora в качество обучать в режим pmcontext оказаться одинаковый – 74,8). точность частеречной разметка в средний оказаться выше точность полный морфологический разметки; для частеречной разметка средний показатель равный 91%, а для полный морфологический разметка средний значение заметно маленький – 74,2%. быть протестировать всё доступный режим работа морфоанализатор nltk4russian, который показать в основный примерно одинаковый точность разметки. быть выяснено, что результат полный морфологический разметка варьироваться в зависимость от жанр текстов: больший точность удаться добиться на текст автор jz (76,8%), следом идти корпус текст социальный сеть вконтакте (75,5%); малый точность наблюдаться для текст новостной корпус (68,3%). в это ряд выделяться результаты, получить при работа в режим униграммный теггера: точность разметка здесь оказаться вообще сам высокой, причём больший точность наблюдаться при разметка новостной корпус (полный морфологический разметка – 90,2%, частеречной – 93,8%). провести эксперимент основать на исследование возможность морфологический анализатора, опубликовать в 2015 г. [3]. в ранний серия эксперимент для обучение использоваться подкорпус opencorpora с снятой омонимия и два выборка из нкрить с снятой омонимией: подкорпус художественный текст и публицистики. для тестирование быть взять выборка из нкря. показатель точность в эксперимент по частеречной разметка располагаться в промежуток от 90 до 95,8%, по полный морфологический – от 79,7 до 86%. самый высокий результат наблюдаться при разметка публицистический (частеречный разметка) и художественный (полный морфологический разметка) текстов. в новый исследование удаться улучшить качество разметки: больший точность частеречной и полный морфологический разметка быть получить при разметка новостной корпус (93,8 и 90,2% соответственно). результат нынешний эксперимент также сравниваться с показателями, получить в ход соревнование морфологический парсер «dialogue evaluation» 2017 г. базовый алгоритм разметка показать результат в промежуток от 68,44 до 76, 54% при полный морфологический разметка и от 72,1 до 79,49% при частеречной разметке. хороший результат на дать соревнование быть получить морфоанализатор abbyy (точность частеречной разметка – 97,11%). показатель остальной участник соревнований, получить в это сегмент соревнование (частеречный разметка), варьироваться от 93,08 до 71,48%. дать наблюдение позволять подтвердить вывод о том, что результат работа парсер nltk4russian являться состоятельный и удовлетворять высокий требование соревнование морфологический анализаторов. исследование поддержать грант рффи № 16-06-00529 «разработка лингвистический комплекс для автоматический семантический анализ русскоязычный корпус текст с применение статистический методов» (2015–2018 гг.).