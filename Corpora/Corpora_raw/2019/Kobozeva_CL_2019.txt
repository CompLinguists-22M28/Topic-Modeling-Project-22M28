М.В. Кобозева, Д.Б. Писаревская, А.А. Тугутова, С.Ю. Толдова
ПРОБЛЕМЫ РАЗМЕТКИ КОРПУСА ТЕКСТОВ НА РУССКОМ ЯЗЫКЕ В ТЕРМИНАХ ТЕОРИИ РИТОРИЧЕСКИХ СТРУКТУР: ИЗ ОПЫТА СОЗДАНИЯ RU-RSTREEBANK 
1.Введение
Анализ текста на уровне дискурса отражает такое основополагающее свойство текста, как связность, так как в ходе данного анализа выявляются связи между фрагментами текста, их порядок, контекст и окружение. Одним из наиболее популярных подходов к анализу дискурсивной структуры текста является Теория риторической структуры (ТРС, Rhetorical Structure Theory) [Mann, Thompson 1988], которая была адаптирована для самых разных языков, что говорит о её универсальности. Разработка корпусов с риторической разметкой является актуальной задачей как в теоретической лингвистике, так и в области автоматической обработки текста. В данной статье предложено описание корпуса Ru-RSTreebank - первого открытого русскоязычного корпуса письменных текстов с дискурсивной разметкой в рамках ТРС. 
ТРС предлагает описание организации текста в виде иерархического дерева дискурсивных единиц (сегментов текста), которые соединяются риторическими отношениями (РО). Минимальной дискурсивной единицей (ДЕ) в базовом варианте является клауза. Объединяясь одним РО, две единицы становятся новой единицей следующего уровня в иерархии, которая в свою очередь также вступает в РО. Таким образом максимальной ДЕ является весь текст. Каждая единица дискурса входит в РО по крайне мере с одной другой единицей и является узлом дискурсивного дерева. Внутри отношения единицы дискурса могут быть «ядрами» (сообщать более важную информацию) или «сателлитами» (сообщать дополнительную информацию). В зависимости от этого отношения между ними могут быть одноядерными (Детализация, Причина-Следствие и др.) и мультиядерными (Последовательность, Контраст, Конъюнкция и др.). Авторы ТРС оставляют возможность варьировать список отношений – в разных работах он может существенно различаться (количество отношений может достигать 80-ти), однако базовый набор включает 23 отношения. 
На основе опыта создания корпусов для других языков (для английского, немецкого, японского и др.) в рамках теории ТРС [Carlson et al. 2003; Stede 2004; Da Cunha 2011] был создан корпус с дискурсивной разметкой для русского языка. Доклад посвящён описанию корпуса, а также обсуждению различных этапов его создания, проблем разметки.
2. Корпус Ru-RSTreebank 
Корпус включает в себя тексты разных жанров. Это обусловлено гипотезой о том, что тексты разных типов будут различаться между собой в своей структуре. Первая часть - 79 текстов в жанрах новостных статей и новостной аналитики, научно-популярных статей. Вторая часть - 100 научных текстов из научной электронной библиотеки «Киберленинка» (https://cyberleninka.ru/): 50 текстов по филологии и лингвистике и 50 текстов по техническим и компьютерным наукам. Корпус включает в себя 203 287 словоупотреблений. Разметка корпуса проводилась несколькими аннотаторами. Использовался инструмент разметки - rstWeb [https://corpling.uis.georgetown.edu/rstweb/info/]. Он позволяет редактировать сегментацию текста, создавать свой список РО, вносить дополнения в инструментарий. В рамках проекта, в rstWeb были добавлены новые функции: вычисление частотного распределения типов отношений, введение иерархии отношений, специальное выделение абзацев для удобства сегментации по элементарным ДЕ, подсветка выбранных типов связей для удобства разметки структуры.
3. Работа над разметкой корпуса 
Опыт разработки RST-корпусов показывает, что из-за различий в грамматической системе языков необходима адаптация теории ТРС для конкретного языка, поэтому вначале мы уточнили понятие ДЕ и состава РО для русского языка. В результате этой работы была создана инструкция для разметки русскоязычных текстов.
Работа над инструкцией проходила в два этапа. На первом этапе была составлена версия для разметки новостных и научно-популярных текстов. 
В первой части инструкции представлены определение и принципы выделения элементарной дискурсивной единицы (ЭДЕ). В определении ЭДЕ мы опираемся на синтаксический принцип: в качестве ЭДЕ используется клауза (предикация), в соответствии с классическим подходом В. Манна и С. Томпсон. Однако мы формулируем ряд важных дополнений с учётом специфики русского языка. Например, придаточные определительные и причастные обороты выделяются в отдельные ЭДЕ в зависимости от их семантики. Описательные (аппозитивные) определения, которые вносят дополнительную информацию, образуют отдельную ЭДЕ, в то время как ограничительные (рестриктивные) определения - нет. 
Кроме того, мы выделяем несколько типов ЭДЕ, которые не обладают глагольной составляющей: 
•	предложные группы со значением причины, следствия, уступки и контраста, содержащие номинализацию (например, предлоги из-за, для, с учетом, несмотря на): [Несмотря на свойственную возрасту впечатлительность,] [Прокофьев не злоупотребляет инициалами.]. 
•	конструкции с номинализациями, в которых риторическое отношение выражено эксплицитно, типа «X является / стал / был причиной / следствием / свидетельством / и т.д. Y»: [Недавняя перестрелка в мечети Газы] [стала свидетельством серьёзной напряжённости.]. 
Эти и другие принципы разметки, снабжённые рядом примеров, вошли в инструкцию. Во вторую часть инструкции вошли определения и примеры для типов РО, выбранных для разметки. По итогам пробной разметки и экспертных обсуждений, оригинальный набор отношений был несколько изменён.  Например, мы объединяем отношения Причина и Следствие в единый тип Причина-Следствие [Pisarevskaya, Ananyeva, Kobozeva et al. 2017]. Итого было отобрано 17 типов дискурсивных отношений. Это одноядерные отношения Background (Фон), Cause-Effect (Причина), Evidence (Обоснование), Condition (Условие), Purpose (Цель), Concession (Уступка), Preparation (Подготовка), Elaboration (Детализация), Solutionhood (Решение), Attribution (Источник), Interpretation-Evaluation (Интерпретация/Оценка) и мультиядерные отношения Contrast (Контраст), Restatement (Переформулировка), Sequence (Последовательность), Comparison (Сравнение), Same-unit (Прерывающаяся единица), Joint (Соединение). 
В рамках второго этапа инструкция была адаптирована для разметки научных текстов. По итогам трёх раундов пробной разметки (трёх, пяти и десяти научных текстов) четырьмя лингвистами-экспертами, в инструкцию были внесены новые дополнения в соответствии со спецификой научных текстов. Во время каждого раунда разметки аннотаторы опирались на последнюю на тот момент версию инструкции. Приведём примеры дополнений, внесённых в первую часть инструкции, посвящённую выделению ЭДЕ. 
Для научных текстов характерны сложные предложения с обилием примеров, перечисления, списки. Было уточнено, что иные однородные члены предложения, помимо сказуемых, не могут являться обоснованием для выделения отдельных ЭДЕ. Текстовые примеры на иностранных языках в филологических текстах и формулы/рисунки в технических, независимо от их размера, выделяются как одна ЭДЕ и соединяются с ЭДЕ, которую они иллюстрируют, отношением Детализация. 
Что касается текстовых примеров на русском языке, мы используем формальный принцип: элементы нумерованного или маркированного списка выделяются в отдельные ЭДЕ, только если среди них присутствуют номинализации. При отсутствии маркированного  списка, примеры объединяются в одну ЭДЕ. 
Также ЭДЕ дополнительно выделяются в предложениях характеризации, в которых обычно субъект – это конкретный предмет или класс предметов, а предикат выражает признак, свойство, действие, состояние, отношение к другим предметам и т.п.: [Для одной из испытуемых была изготовлена маска из термопласта -] [особо прочного материала, полностью исключающего возможность «подглядывания».].
Во вторую часть инструкции были добавлены принципы, позволяющие выбрать отношения в спорных ситуациях. Так, дискурсивный маркер «например» употребляется в отношениях Детализация и Обоснование. Если он отсылает к именной группе внутри ядра (1), то это отношение Детализация, т.е. детализируется некоторый объект/явление (диагностический вопрос: «Какой X?»). Если ко всей клаузе в целом (2) - это отношение Обоснование, т.е. сателлит является подтверждением всего утверждения в ядре (диагностический вопрос: «Чем это подтвердить?»):
(1)	[Некоторые позитивные признаки уже можно заметить.] [Например, в июле Международный валютный фонд похвально объявил о существенном увеличении объемов льготного кредитования наименее развитым странам.] 
(2)	[Впрочем, столь высокая цена не отпугнула рекламодателей:] [например, Nissan уже заплатил 10 млн.]
После третьего раунда пробной разметки, окончательная версия инструкции по дискурсивной разметке русскоязычных текстов с учётом специфики научных текстов была утверждена, и четыре аннотаторами осуществили разметку 100 основных текстов в соответствии с ней. Каждый текст размечался двумя аннотаторами. Регулярно проводилась автоматическая проверка согласия аннотаторов. Для её оценки применялась мера Krippendorff’s unitized alpha [Krippendorff 2011], позволяющая проводить измерения при любом количестве аннотаторов и в случаях, если разметчики по каким-либо причинам выделили разное количество сегментов текста. В рамках последнего измерения мера составила 81%, что на данный момент является максимальным значением для данного показателя. На заключительном этапе для каждого текста осуществлялась проверка согласованности разметки, и выбиралась оптимальная разметка, которая была включена в корпус. 
Первые версии корпуса (179 текстов) и инструкции для разметки находятся в открытом доступе [http://rstreebank.ru/]. Финальная версия на настоящий момент доступна по запросу. 
4. Разбор трудностей при разметке. 
Можно выделить два типа возникающих трудностей: 1) возможность приписать разные типы отношений одному и тому же фрагменту; 2) последовательность присоединения отношений. Деление на ЭДЕ, в целом, не вызывало больших разногласий между аннотаторами благодаря четкой инструкции. 
Меньше всего спорных случаев возникало с отношениями Условие, Цель, Уступка, Источник и Последовательность. Больше всего разногласий было с одноядерными отношениями Детализация, Обоснование, Интерпретация/Оценка и мультиядерными отношениями Контраст, Сравнение и Соединение. Например, не всегда получается отличить Фон от Подготовки, так как оба отношение несут в себе контекст для следующего предложения: [В балканских языках существует до 150 сходных элементов. Многими исследователями ощущалось сходство балканских языков не только в грамматике, но и на уровне устойчивых фраз и оборотов речи.] [Фразеологические примеры неизменно включаются в фундаментальные балканистические исследования.]. 
Вариативность в последовательности присоединения дискурсивных единиц можно проиллюстрировать следующим примером: [Любой грек <...> может обидеться на человека, который его сделал посмешищем,] /Конъюнкция/ [и достаточно сложно будет убедить его в обратном,] /Причина/  [потому что греки в большинстве своем чрезвычайно впечатлительны и вспыльчивы]. Варианты разметки: Причина связывает одновременно две предыдущих ЭДЕ, либо только предшествующую ей.
Частой проблемой становится очерёдность приписывания отношений в самом начале или в конце абзаца. В некоторых случаях отношение Подготовка может быть рассмотрено как относящееся к одному фрагменту из абзаца, а иногда ко всему полностью. При присоединении предложения-вывода в конце абзаца можно сделать это как относящееся к определённому фрагменту, так и предшествующей части целиком. 
5. Заключение
Опыт дискурсивной аннотации корпуса на русском языке в терминах ТРС показал, что необходима адаптация к особенностям конкретного языка не только правил выделения тех или иных отношений, но и самого списка отношений, а также правил сегментации текста на ЭДЕ. В дальнейшем предложенные принципы разметки будут применяться и к другим жанрам текста (например, к блогам), чтобы в корпусе были представлены тексты различных жанров. 

