В. А. Баранов
ПОИСК И ДЕМОНСТРАЦИЯ ДАННЫХ 
В ИСТОРИЧЕСКОМ КОРПУСЕ «МАНУСКРИПТ» 
1. Стандартные формы поиска и визуализации данных
Необходимыми составляющими любого корпуса являются размеченные тексты и процедуры обработки, поиска и демонстрации данных – корпусный менеджер. 
Исторический корпус «Манускрипт» (manuscripts.ru), содержащий полные транскрипции текстов средневековых славянских рукописей X–XV веков , предоставляет пользователю несколько способов доступа к данным – одношаговый и двушаговый интерфейсы, поиск материала в нескольких или только в одном документе, особую запросную форму для параллельных корпусов, а также специальные интерфейсы для извлечения n-грамм и для получения количественных и статистических сведений о единицах корпуса.
Созданные в разное время, предназначенные для решения различных задач, запросные формы имеют тем не менее несколько идентичных параметров: указание маски лингвистической единицы и ее грамматических значений, выбор алфавита визуализации и формы вывода – текста, перечней, конкордансов. Если текст и/или рукопись имеют аналитическую разметку, то пользователь может увидеть соответствующие фрагменты  или построить указатели их словоформ или лемм. Использование многотекстовой запросной формы позволяет получить сопоставительные перечни лингвистических единиц, которые дают возможность увидеть различия в лексическом составе кодексов.
Особое внимание уделено средствам нечеткого поиска, который необходим для нивелирования различий в написании одной и той же словоформы. Пользователь может 1) выбрать одну из предложенных степеней точности маски, что позволяет приравнивать или различать строчные, надстрочные и инициальные буквы, учитывать или не учитывать их вариантность, унифицировать или устранять диакритику и титла, раскрывать лигатуры и под.; 2) использовать при создании маски регулярные выражения; 3) создать маску с помощью современного кирилловского алфавита; 4) выбрать поиск на основе лемм.
Отличаются от современных корпусов и способы доступа к документам : пользователь может выбрать для работы отдельную рукопись или уже сформированную коллекцию, которые доступны на отдельных страницах портала, создать подкорпус или сделать запрос по всему корпусу. 
2. Специализированные формы демонстрации данных
Корпус имеет две специализированные возможности доступа к данным – модуль n-грамм и модуль статистики. 
2.1. Модуль n-грамм
Модуль  предназначен для получения сведений о сочетаемости лингвистических единиц. Особенностью запросной формы является наличие параметров, обеспечивающих получение количественной и статистической информации о разнообразных многокомпонентных сочетаниях:
-	базовые – количество компонентов и статистическая мера;
-	структурные – расстояние между компонентами, их следование, точность совпадения маски и текстового прецедента и нек. др.;
-	лингвистические – тип компонентов (словоформа / лемма), их грамматические значения, учет стоп-слов и границ конструкций и др.
В настоящее время пользователю доступны семь статистических мер – Mutual Information score (и вариант Pointwise Mutual Information score), T-score, Log-Likelihood score (и вариант Log-LikelihoodDunning), Dice coefficient (и вариант logDice), Chi-squared test, C-value, Inside . 
Одной из целей анализа n-грамм в корпусе, как известно, является поиск устойчивых сочетаний – коллокаций и коллигаций. Модуль позволяет проводить различные эксперименты, используя сочетания параметров и их значений в зависимости от решаемых задач. Так, выявление симметричных сочетаний возможно двумя способами – с помощью меры Dice и с помощью параметра «Симметрия», который так же, как статистическая мера, извлекает из подкорпуса n-граммы, компоненты которых встречаются только вместе. 
Одновременно могут использоваться несколько параметров. Так, результатом запроса, приведенного на рисунке 1 , стали биграммы страхъ гс҇нь (значение меры 2,82), (отъ) лица страха (1,99), страсѣ трепетѣ (1,41), прм҃дрости страхъ (1,41), wтврьзають страхы (1,00) и нек. др.
Рис. 1. Извлечение биграмм с компонентом страх(ш) 
из подкорпуса Паримейников
2.2. Модуль статистики
Второй специализированный модуль  сегодня имеет несколько режимов работы: а) режим выявления распределения единиц (символов, словоформ, лемм) в рукописи(ях), б) режим количественной оценки единиц (символов, словоформ, лемм, фрагментов, текстов) в пределах подкорпуса(ов), в) режим статистической оценки лингвистических единиц подкорпуса в сопоставлении со средней их частотностью в контрастном подкорпусе. 
Рис. 2. Распределение словоформ с начальным страх(ш) 
в трех списках летописей
На рисунке 2 показан результат запроса по поиску распределения словоформ с начальным страх(ш) в трех списках летописей (Лаврентьевском, Ипатьевском, Радзивилловском ). Графики, выровненные по погодным записям, демонстрируют бóльшую частотность этих слов в некоторых фрагментах второй половины списков, например в погодных записях с 1095 по 1098 гг.
Использование второго режима позволяет сравнить абсолютные и относительные частоты одной единицы в нескольких подкорпусах. При использовании неточной маски словоформы могут быть показаны как списком, так и суммированно. В таблице 1 приведено начало списка слов с начальным страх(ш) и их абсолютное и относительное количество в подкорпусах летописей и Паримейников. Режим суммирования позволяет получить относительное количество тех же слов, которое для этой выборки равно 0,00026 и 0,00060 соответственно. Оба представления показывают бóльшую частотность этих слов в текстах Паримейников. 
Таблица 1. Словоформы с начальным страх(ш) в летописях 
и Паримейниках (начало списка) 
Единицы	Ранг	Всего	Подкорпус 
летописей	Подкорпус 
Паримейников
		436 452	349 913	86 539
		F	f	F	f	F	f
страхъ	1	35	0,00008	19	0,00005	16	0,00018
страха	2	28	0,00006	15	0,00004	13	0,00015
страшно	3	19	0,00004	17	0,00005	2	0,00002
страшенъ	4	8	0,00002	7	0,00002	1	0,00001
страхомъ	5	7	0,00002	6	0,00002	1	0,00001
страшна	6	5	0,00001	3	0,00001	2	0,00002
Третий режим предназначен для статистического сопоставления частот лингвистических единиц с их средними частотами в контрастном подкорпусе. Пользователь имеет возможность использовать меры Log-Likelihood, T-score и Weirdness (и их варианты, обеспечивающие вычисления и при отсутствии формы в контрастном подкорпусе) . Например, оценка слов с начальными страх(ш) в подкорпусах летописей и Паримейников на фоне большей части текстов исторического корпуса показывает более чем двукратное превышение значения меры T-score в Паримейниках – 0,00185 vs 0,00081.
3. Подготовка подкорпуса и интеграция модулей
В связи с тем, что лингвистический анализ часто требует сопоставления материалов подкорпусов, обладающих различными характеристиками, важной составляющей корпусного менеджера является обеспечение формирования подкорпусов на основе метаразметки. Особенностью корпуса «Манускрипт» является возможность подготовки подкорпуса не только на основе характеристик текстов и рукописей, но и на основе разметки фрагментов, что позволяет исследовать, в частности, текстологически неоднородные по составу кодексы. Так, могут быть созданы подкорпуса стихир и канонов служебных миней, подкорпуса глав евангельских книг и т.п. В таблице 2 представлены первые 10 наиболее частотных слов и форм тропарей и стихир нескольких служебных миней XI–XIV вв. 
После разработки двух новых модулей – модуля статистики и модуля n-грамм исторически сложившееся разнообразие способов доступа потребовало их интеграции, которая бы устранила необходимость при переходе из одного модуля в другой вновь формировать подкорпус.
В настоящее время подготовленный подкорпус может быть сохранен и использован в различных модулях. При переключении между запросными формами загруженные подкорпуса остаются доступными для выборки, а в модуле статистики часть из них может быть удалена или к ним могут быть подгружены другие.
Таблица 2. Наиболее частотные словоформы в тропарях и стихирах славянских служебных миней XI–XIV вв. 
Единицы	Ранг	Подкорпус миней. Всего	Стихиры миней	Тропари 
миней
		15 160	8 843	6 317
		F	f	F	f	F	f
и	1	603	0,03978	382	0,04320	221	0,03498
въ	2	191	0,01260	118	0,01334	73	0,01156
ти	3	128	0,00844	72	0,00814	56	0,00886
яко	4	126	0,00831	60	0,00679	66	0,01045
съ	5	104	0,00686	76	0,00859	28	0,00443
тѧ	6	94	0,00620	47	0,00531	47	0,00744
на	7	92	0,00607	50	0,00565	42	0,00665
сѧ	8	87	0,00574	48	0,00543	39	0,00617
ѥси	9	85	0,00561	39	0,00441	46	0,00728
же	10	84	0,00554	47	0,00531	37	0,00586
Заключение
При создании интерфейса доступа к корпусу должны быть решены многообразные технологические задачи, обеспечены функциональность и дружественность форм запросов и вывода. За более чем пятнадцатилетнюю работу над корпусом коллектив проекта создал несколько версий каждого из модулей, совершенствуя одни функции и отказываясь от других. Некоторые версии модулей так и остались экспериментальными. Существенных нововведений потребовали предоставление пользователю возможности работы с аналитической разметкой и создание статистических модулей. 
Поиски наиболее оптимальных форм запросов и вывода данных исторического корпуса продолжаются.