П. Л. Гроховский, А. В. Добров, А. Е. Доброва, Н. Л.
КОРПУС-МЕНЕДЖЕР ДЛЯ МОРФОСИНТАКСИЧЕСКОЙ РАЗМЕТКИ: ОПЫТ РАЗРАБОТКИ КОРПУСА ТИБЕТСКИХ ГРАММАТИЧЕСКИХ СОЧИНЕНИЙ
В рамках проекта РФФИ «Морфосинтаксический анализатор текстов на тибетском языке» был создан корпусный менеджер (далее — КМ) для ранее подготовленного корпуса тибетских грамматических сочинений. Токенизация и морфологическая разметка были первоначально выполнены вручную: искусственное разделение тибетских текстов на токены характеризовалось некоторой произвольностью, так как графематическое или какое-либо иное деление на словоформы в тибетском языке отсутствует; поэтому было принято решение ограничиться инвентарём более чётко определяемых атомарных единиц морфосинтаксической структуры: алломорфов, знаков пунктуации, разделителей, цифр.
Синтактика алломорфов в тибетском языке переплетена с синтаксисом предложения, поэтому формальная грамматика должна моделировать все уровни грамматической системы от алломорфов до высказываний и текстов.
Существующие КМ ориентированы на языки иного строя и работают с токенизацией и морфологической разметкой, поэтому было принято решение разработать иной КМ, который бы позволил: 1) работать с синтаксической (морфосинтаксической) разметкой и 2) находить в ней места, требующие усовершенствования лингвистического процессора, её порождающего.
КМ позволяет загружать неразмеченные тексты или тексты в “вер-тикальном” формате для их дальнейшей автоматической разметки, отражающей структуры непосредственных составляющих и зависимостей, при этом единицы, ранее считавшиеся токенами, разбиваются на алломорфы, которые далее объединяются в древовидные структуры.
Поиск, организованный в КМ, позволяет находить морфосинтаксические структуры по заданным моделям. На данный момент доступен поиск по тибетским моделям слово- и формообразования, однако может быть реализован поиск по синтаксическим структурам любой сложности (в разметке других корпусов в КМ представлены структуры предложений и текстов, и расширение границ разметки тибетского корпуса планируется в будущем). Поскольку поиск осуществляется не по словам, а по морфосинтаксическим деревьям, результатом поиска являются фрагменты синтаксических структур (морфосинтаксические деревья с грамматическими характеристиками и морфемным наполнением).
КМ включает в себя поддержку для корпусов на различных языках документов корпусов и включает ряд инструментов для автоматической разметки корпуса и обнаружения фрагментов этой разметки, требующих усовершенствований лингвистического обеспечения («ошибок» разметки).
КМ предоставляет возможность просмотра разметки полностью размеченных фрагментов текста. Для частично размеченных фрагментов отображается три дополнительных вида помет: нераспознанные единицы, разрывы и перекрытия синтаксических деревьев. Нераспознанными считаются фрагменты, для которых в разметке отсутствуют синтаксические деревья; разрывами — позиции, в которых дерево не может быть связано с соседним; перекрытиями — фрагменты текста, в которых пересекаются синтаксические деревья, не полностью покрывающие текст: фрагмент, покрытый одним деревом, включает позицию начала фрагмента, покрытого вторым деревом, но не позицию его конца.
Данный инструментарий позволяет одновременно работать над разметкой корпуса и совершенствовать формальную модель, стоящую за используемым лингвистическим обеспечением, что представляет собой новый подход к разработке модулей лингвистического процессора, обеспечивающий постоянную верифицируемость формальной модели и её соответствие корпусному материалу. Последовательно устраняя нераспознанные фрагменты, разрывы в разметке, перекрытия и комбинаторные взрывы путём усовершенствования лингвистического обеспечения, разработчик в итоге добивается не только полной разметки корпуса, но и такого состояния формальной модели, при котором она объясняет все наблюдаемые в корпусе явления.
При создании формальных грамматик изначально учитываются, как правило, лишь наиболее типичные и понятные разработчику явления языковой грамматики, однако при работе с корпусом текстов обнаруживается множество неочевидных, но частотных конструкций, не учтенных при создании модели. К числу таких явлений в тибетском корпусе относилось употребление различных сочетаний с цифрами и числительными, имён и именованных сущностей, окказионализмов и специфических конструкций, в том числе — металингвистические употребления экспонентов языковых единиц (например, суффикс -pa- /-ba-). Работа с данным корпусом осуществлялась именно методом последовательного устранения недостатков разметки путем последовательного пополнения и исправления словарей и формальной грамматики; при этом было устранено около 700 разрывов, 100 перекрытий и 200 комбинаторных взрывов.
При разработке КМ использовалась гибкая архитектура, включающая в себя СУБД PostgreSQL, серверное приложение (скрипты на языке Python, подключённые к веб-серверу Apache через mod_wsgi) для обработки JSON-RPC запросов и статический веб-интерфейс с адаптивной версткой на основе технологии Bootstrap: КМ доступен как в десктопных, так и в мобильных браузерах. Лингвистический процессор также подключён к КМ: серверный компонент КМ отправляет запросы gsoap-серверу AIIRE на обработку и автоматическую разметку текстов; разметка передаётся в формате XML. КМ обеспечивает сохранение разметки в СУБД; на стороне СУБД средствами хранимых процедур производится парсинг XML и сохранение разметки в таблицы непосредственных составляющих и грамматических признаков. Дальнейшая обработка разметки производится средствами серверного компонента КМ: производится поиск и сохранение в СУБД нераспознанных фрагментов, разрывов, перекрытий и комбинаторных взрывов. Кроме того, серверный компонент КМ обладает API для выдачи компонентов разметки в виде JSON-объектов, отражающих НС- структуры с грамматической информацией, информацией о зависимостях и морфемном наполнении. Отрисовка древовидных структур реализована на клиентской стороне на языке Javascript: НС-структуры изображаются в виде SVG-файлов. При существенном объеме данных этот процесс может занимать длительное время. Исходный код КМ, как и исходный код лингвистического процессора, является открытым и доступен по адресу: http://svn.aiire.org/repos/tproc/trunk/t/ corpus_manager. КМ допускает вертикальное и горизонтальное масштабирование стандартными средствами Apache и PostgreSQL. В КМ реализован механизм аутентификации и распределения прав доступа; гостевой доступ обеспечивает возможность просмотра опубликованных корпусов и их разметки, а также поиска по ним; доступ разработчика и административный доступ позволяют работать с разметкой и инструментарием её отладки.
В ходе морфосинтаксической разметки корпуса 86 192 единицы размечены как атомарные, что почти в 2 раза превосходит количество единиц, ранее считавшихся токенами (48 166). При этом 44 837 из них получили автоматическую разметку в виде морфосинтаксических деревьев, полностью покрывающих исходные токены. Таким образом, суммарное покрытие автоматической разметки составило 97 %. КМ доступен по адресу http://corpora.spbu.ru/corman/.