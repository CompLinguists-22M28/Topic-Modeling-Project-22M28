И.М. Богуславский, Л.Л. Иомдин, Л.Г. Митюшин, В.Г. Сизов
ДЛИНА  СИНТАКСИЧЕСКИХ  СВЯЗЕЙ  
В  РУССКОМ  АННОТИРОВАННОМ  КОРПУСЕ 
1. Введение
В данной работе проводится статистический анализ корпуса СинТагРус (Syntactically Tagged Russian text corpus – синтаксически аннотированный корпус русских текстов). Корпус представляет собой совокупность текстов различных жанров (художественных, научно-популярных, информационных и др.), где каждому предложению приписана морфо-синтаксическая структура в виде дерева зависимостей в соответствии с формализмом, используемым в многофункциональном лингвистическом процессоре ЭТАП  и основанным на модели «Смысл  Текст» . Работа над корпусом была начата в 2000 г.  и продолжается в настоящее время. В начале 2008 г. корпус содержал около 32 000 предложений общим объемом около 460 000 слов.
В компьютерно-лингвистической литературе неоднократно отмечалось, что в текстах на естественном языке предпочитаются более короткие синтаксические связи . В данной работе делается попытка дать статистическое подтверждение этому наблюдению. Для различных типов связей анализируется характер зависимости частоты связей от длины. Рассматривается также условная вероятность наличия связи в ситуации, благоприятной для ее возникновения, и зависимость этой вероятности от длины связи. Анализ статистических данных показывает, что для большинства типов связей в обоих случаях имеет место устойчивое экспоненциальное убывание рассматриваемых величин.
2. Данные в корпусе СинТагРус
Морфо-синтаксическая структура предложения представляет собой дерево зависимостей – ориентированное дерево, узлы которого соответствуют словам предложения, а дуги помечены именами синтаксических отношений. Узлы считаются упорядоченными в соответствии с порядком слов в предложении. Для каждого узла указывается лемма, часть речи слова и набор морфологических характеристик, выражающих значения таких категорий как вид, время, залог, лицо, число, падеж, род и т.п. В процессоре ЭТАП и корпусе используются обычные русские части речи: глагол (V), существительное (S), прилагательное (A), наречие (ADV), числительное (NUM), предлог (PR), союз (CONJ), частица (PART), междометие (INTJ).
В корпусе используется более 60 синтаксических отношений. Многие из них соответствуют очень частым и простым ситуациям (например, связь между некоторым словом и его «главным» дополнением представляется 1-м комплетивным отношением, связь между существительным и модифицирующим его прилагательным – определительным отношением, связь между глаголом и модифицирующим его наречием – обстоятельственным отношением). С другой стороны, есть и редкие отношения – например, аппроксимативно-количественное, связывающее существительное и числительное в выражениях со значением приблизительного количества (минут десять).
3. Статистические данные о длине связей
Под длиной связи (или расстоянием) d между узлами A и B понимается число узлов дерева, расположенных между A и B, плюс 1. Таким образом, для cоседних слов d = 1. Прежде всего приведем некоторые общие статистические показатели, характеризующие длину связей без учета маркирующих связи синтаксических отношений.
Теперь рассмотрим распределение длины для наиболее частотных типов связей. Мы будем рассматривать только проективные связи. Напомним, что связь от A к B называется проективной, если все узлы, линейно расположенные  между A и B, прямо или косвенно подчинены A. Более 99% связей в корпусе являются проективными.
Под связью определенного типа мы понимаем определенное синтаксическое отношение, соединяющее слова определенных частей речи в определенном направлении. Мы рассмотрим 40 наиболее частотных типов связей; в совокупности они покрывают около 77% всех связей корпуса. Наиболее частый тип – связь  A ← S  с определительным отношением, которая встречается 53 252 раза (12,5% от общего числа связей в корпусе). В табл. 1 для этого типа приведено распределение частот по длине (частоты меньше 10 не приводятся, так как считаются статистически недостоверными). Около 84% общей частоты приходится на d = 1; при d ≥ 2 числа убывают приблизительно экспоненциально.
Подобная картина характерна для большинства рассмотренных типов связей. Начиная с d = 2 (иногда с d = 3), имеет место приблизительно экспоненциальное убывание; при d = 1 и 2 возможны разного рода «индивидуальные отклонения».
В Приложении для каждого рассматриваемого типа указывается средняя длина связи, а также коэффициент регрессии a, характеризующий скорость убывания логарифма частоты связей данного типа при возрастании длины. Значение a вычисляется следующим образом. Определяется отрезок [d1, d2] рассматриваемых значений d по следующим правилам: 
      d1 – точка максимума F(d) при d ≥ 2 (чаще всего d1 = 2).
      d2 – наибольшее число, такое, что F(d) ≥ 10 на отрезке [d1, d2].
Далее строится линейная функция ad + b, которая является наилучшим приближением –ln F(d) на [d1, d2] в смысле суммы квадратов отклонений. Таким образом, на [d1, d2] частоты F(d) ведут себя приблизительно как C e–ad, где C – константа.
4. Условные вероятности связей
Деревья зависимостей, как правило, можно собирать методом «снизу вверх» из отдельных узлов (тривиальных поддеревьев), последовательно проводя синтаксические связи между построенными к данному моменту соседними поддеревьями. Реальные деревья зависимостей, не допускающие такую сборку, редки – в корпусе всего 30 таких предложений. 
Предположим, что нам известны части речи P1, ... ,Pn всех слов некоторого предложения, и мы хотим определить вероятность того, что данное предложение имеет дерево зависимостей T (имеющее n–1 связь). Предположим, что T можно собрать из отдельных узлов методом «снизу вверх». Зададим некоторый порядок сборки, т.е. порядок связей l1, ... , ln-1 дерева T так, что каждая связь li проводится между соседними уже построенными поддеревьями (это могут быть либо исходные изолированные узлы, либо поддеревья, образованные некоторыми из связей  l1, ... , li-1). Тогда
Вместо этой точной формулы для вероятности T при заданных P1, ... ,Pn  будем рассматривать приближенную оценку правдоподобия T, получаемую заменой сомножителей                 Pr (li / l1, ... , li-1, P1, ... ,Pn) на их «контекстно-свободные» аппроксимации вида Pr (R / PA, PB, d, s), где последнее выражение означает вероятность того, что от узла A к узлу B идет связь с синтаксическим отношением R при условии, что известны части речи PA и PB узлов A и B, расстояние d между ними и направление связи s (0 = влево, 1= вправо). При этом подразумевается, что, в некотором смысле, A и B являются в T вершинами некоторых соседних поддеревьев (более точно это условие обсуждается в разделе 5). Новая оценка имеет вид
где Ri, PAi, PBi, di, si – соответственно синтаксическое отношение, часть речи хозяина, часть речи слуги, длина и направление связи li.
Заметим, что задание определенных значений R, PA, PB, d и s эквивалентно выбору определенного типа связи. Оценим значения Pr (R / PA, PB, d, s) для наиболее частотных типов связей, используя данные корпуса. Прежде всего необходимо внести одно ограничение на «контекстную независимость», связанное с так называемыми неповторимыми синтаксическими отношениями. Смысл «неповторимости» состоит в том, что из узла может идти не более одной связи, помеченной данным отношением. Например, 1-е комплетивное отношение является неповторимым (что означает, в частности, что глаголу разрешается иметь не более одного прямого дополнения), тогда как обстоятельственное отношение повторимо (в частности, глагол может иметь несколько модифицирующих его адвербиальных групп). Большинство отношений, используемых в процессоре ЭТАП и корпусе, являются неповторимыми. 
Ограничения, налагаемые неповторимостью, соблюдаются во всех деревьях корпуса. Поэтому для связей с неповторимым отношением R в Pr (R / PA, PB, d, s) присутствует неявное дополнительное условие: из узла-хозяина A не идет связь с отношением R в какой-либо узел, отличный от B. Это учитывается при вычислении оценок Pr (R / PA, PB, d, s) по данным корпуса.
5. Оценка условных вероятностей по данным корпуса
Чтобы оценить Pr (R / PA, PB, d, s), для некоторых R, PA, PB, d и s, рассматриваются все пары узлов A и B в предложениях корпуса, имеющие части речи PA и PB и расположенные в порядке s на расстоянии d друг от друга. Для каждой такой ситуации проверяется, что A и B являются в T вершинами некоторых двух соседних поддеревьев. Для этого удаляются все связи в T, идущие из A в B или «дальше B», и идущие из B в A или «дальше A», и в оставшемся графе рассматриваются полные поддеревья TA и TB с вершинами A и B. Если они граничат, т.е. покрываемые ими отрезки не пересекаются и расстояние между ближайшими узлами TA и TB равно 1, ситуация считается допустимой. Если отношение R является неповторимым, из числа допустимых исключаются ситуации, когда в TA из A выходит связь с отношением R. За оценку Pr (R / PA, PB, d, s) (обозначаемую Pr*) принимается отношение числа F тех допустимых ситуаций, в которых в T  имеется связь с отношением R из A в B, к числу всех допустимых ситуаций.
Для наиболее частого типа связи – A ← S с определительным отношением – соответствующие данные приведены в табл. 1. Значения Pr*(d), как и F(d), убывают приблизительно экспоненциально, хотя и с меньшей скоростью, чем F(d). Такой характер убывания Pr*(d) типичен для большинства рассмотренных типов связей. 
В Приложении приводятся коэффициенты регрессии a1 для  –ln Pr*(d).Для 33 из 40 типов связей выполняется  a1 ≥ 0,1. Среди остальных семи выделяется тип 2 (PR → S с предложным отношением): у него с ростом длины  абсолютная частота связей быстро убывает, а вероятность наличия связи в допустимой ситуации остается близкой к 1. Остальные шесть типов (3, 7, 9, 14, 25 и 29) интуитивно ощущаются как допускающие весьма далекие связи. Небольшое отрицательное значение a1 для типа 29 – скорее всего случайная ошибка, возникшая в ситуации малого числа наблюдений.

